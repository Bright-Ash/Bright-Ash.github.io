--- 
title: "가상화 클라우드 | Virtualized Cloud" 
date: 2024-12-05 09:40:00 +0900
achieved: 2024-12-09 17:30:00 +0900
math: true
categories: [Bootcamp, KT Aivle School]
tags: [Bootcamp, KT Aivle School, Virtualized Cloud]
---
---------- 
> 가상화 클라우드 기초 정리 글입니다. 
{: .prompt-info } 


## **Chap 1. 가상화 및 클라우드 개요**

### **기존 환경의 문제점**
#### **원인**
- **극도의 복잡성**: 기존 IT 인프라는 여러 가지 시스템과 기술들이 얽혀 있어 매우 복잡했습니다. 이는 유지 관리에 많은 시간과 비용이 소요되는 원인이 됨.
- **빈약한 인프라의 의존**: 오래된 하드웨어와 소프트웨어에 의존하는 경우, 시스템 성능이 저하되고 새로운 기술 도입이 어려워짐.
#### **결과**
- **IT 예산의 대부분이 현상 유지에 사용**: 70% 이상의 IT 예산이 기존 시스템을 유지하는 데 사용되며, 새로운 기술 도입이나 개선을 위한 예산은 30% 이하로 제한.
- **IT 경쟁력 저하**: IT 경쟁력이 낮아지면 비즈니스 경쟁력도 저하됩니다. 이는 기업이 시장에서 뒤처지는 주요 원인 중 하나가 됨.

---

### **가상화 기술을 통한 문제 해결**
- **모든 IT 자산의 가상화**: 서버, 스토리지, 네트워크 등 모든 자원을 가상화하여 효율성을 극대화.
- **유연한 업무 인프라 구축**: 가상화 플랫폼을 이용해 동적이고 유연한 IT 인프라를 구축할 수 있음.
- **데이터센터 리소스의 가상화**: 데이터센터 내 모든 리소스를 가상화하여 자원의 활용도를 높이고 관리 효율성을 증대.

---

### **가상화 유형**
- **서버 가상화**: 여러 개의 가상 서버를 하나의 물리적 서버에서 실행하여 자원을 효율적으로 사용.
- **네트워크 가상화**: 네트워크 리소스를 가상으로 나누어 각기 다른 네트워크 환경을 구축하고 더 유연하게 관리할 수 있음.
- **스토리지 가상화**: 물리적 저장 공간을 가상화하여 데이터 저장 및 관리를 보다 쉽게 하고, 저장소 자원을 효율적으로 활용할 수 있음.
- **데스크톱 가상화**: 개별 사용자가 각기 다른 가상 데스크톱 환경에 접속할 수 있도록 하여 어디서든 접근 가능한 작업 환경을 제공.

---

### **가상화 도입 효과**
- **물리적 서버 감소**: 물리적 서버의 수를 줄여 하드웨어 비용을 절감.
- **비용 절감**: 상면 비용, 전력 비용, 관리 비용 등이 줄어듦.
- **탄소 배출 감소**: 에너지 효율성을 높여 환경에 긍정적인 영향을 미침.

---

### **가상화 정의**
- 가상화는 운영 체제와 물리적 하드웨어를 분리하여 IT 담당자가 직면한 많은 문제를 해결하는 기술.
- 이를 통해 자원을 효율적으로 활용하고, 물리적 제약 없이 여러 운영 체제를 동시에 사용할 수 있음.

---

### **가상화의 발전**
- **클라이언트 하이퍼바이저**: 사용자 측 컴퓨터에서 가상화를 통해 다양한 운영 체제를 사용할 수 있음.
- **서버 하이퍼바이저**: 데이터센터에서 서버 가상화를 통해 여러 개의 가상 서버를 실행할 수 있음.
- **가상 인프라**: 모든 IT 인프라를 가상화하여 물리적 인프라의 제약을 극복하고, 유연한 자원 관리를 가능하게 함.
- **클라우드**: 가상화된 인프라를 클라우드 환경으로 발전시켜 필요에 따라 자원을 동적으로 확장하거나 축소할 수 있음.

---

### **하이퍼바이저**
- **하이퍼바이저의 역할**: 시스템에서 여러 운영 체제를 동시에 실행할 수 있도록 하는 논리적 플랫폼.
- **유형**
  - **Type 1 (Bare-metal 하이퍼바이저)**: 하드웨어에서 직접 실행되며 성능이 좋고 안정적인 하이퍼바이저. 주로 서버 가상화에 사용.
  - **Type 2 (Hosted 하이퍼바이저)**: 운영 체제 위에서 실행되며 테스트나 개발 환경에서 많이 사용.

---

### **물리적 리소스 공유**
- **가상 리소스와 물리적 리소스의 관계**: 가상화된 환경에서는 가상 머신이 실제 물리적 리소스(CPU, 메모리 등)를 나누어 사용함. 이는 물리적 자원의 활용도를 높여 자원의 낭비를 줄임.

---

### **CPU 리소스 공유**
- 가상 환경에서 운영 체제는 시스템의 모든 물리적 CPU 중 할당받은 CPU만을 소유한 것으로 인식. 
- 이를 통해 여러 운영 체제가 물리적 CPU를 효율적으로 나누어 사용할 수 있음.

---

### **메모리 리소스 공유**
- 가상 환경에서 운영 체제는 시스템의 모든 물리적 메모리 중 할당받은 메모리만을 소유한 것으로 인식. 
- 이로 인해 여러 운영 체제가 메모리를 효율적으로 나눠 사용할 수 있음.

---

### **가상 네트워킹**
- **가상 이더넷 어댑터와 가상 스위치**: 하이퍼바이저가 소프트웨어적으로 가상 이더넷 어댑터와 스위치를 구현하여 네트워크를 제공. 이를 통해 가상 머신 간의 통신이 가능.

---

### **클라우드 컴퓨팅이란?**
- 클라우드 컴퓨팅은 인터넷을 통해 IT 리소스(컴퓨팅 파워, 스토리지, 데이터베이스 등)를 필요할 때 언제든지(On-demand) 제공하고, 사용한 만큼만 비용을 지불하는 서비스. 
- 과거에는 직접 서버를 구매하고 관리해야 했지만, 클라우드를 통해 클릭 몇 번으로 필요한 자원을 즉시 사용할 수 있음.

---

### **과거의 산업과 현대**
- **과거**: 과거에는 기업이 직접 전기를 생산해서 사용해야 했음.
- **현대**: 이제는 전기 콘센트에 플러그를 꽂기만 하면 전기를 사용할 수 있음.
- **비유**: 클라우드 컴퓨팅은 현대의 전기처럼, 필요할 때 즉시 사용할 수 있는 IT 자원을 제공.

---

### **클라우드 컴퓨팅을 사용하면**
- **간단한 명령과 몇 번의 클릭으로 IT 자원 사용 가능**
- **사용할 수 있는 IT 자원**: CPU, 메모리, 스토리지, 네트워크, 데이터베이스 등

---

### **클라우드 컴퓨팅의 이점**
- **초기 선 투자 불필요**: 물리적 장비를 구매하지 않아도 됩니다.
- **저렴한 종량제 가격**: 사용한 만큼만 비용을 지불하므로 경제적입니다.
- **탄력적인 운영 및 확장 가능**: 필요에 따라 자원을 쉽게 확장하거나 축소할 수 있습니다.

---

### **탄력성이란?**
- 탄력성은 변화하는 요구 사항에 맞게 신속하게 IT 리소스를 확장하거나 축소할 수 있는 기능을 말함. 
- 예를 들어, 쇼핑몰에서 이벤트 기간 동안 많은 트래픽이 예상될 때 클라우드를 통해 서버 자원을 늘릴 수 있음.

---

### **클라우드 컴퓨팅의 이점**
- **속도와 민첩성**: 기존 인프라 구축에 몇 주가 걸리던 것을 몇 분 안에 해결할 수 있음.
- **비즈니스 집중 가능**: IT 인프라 관리 부담을 줄여 비즈니스에만 집중할 수 있음.
- **글로벌 진출 용이**: 전 세계 데이터센터를 통해 글로벌 서비스를 손쉽게 제공.

---

### **비즈니스 민첩성(Agility)?**
- **기존 인프라 준비**: 물리적 인프라를 준비하는 데 수 주일이 걸림.
- **클라우드 사용 시**: 몇 분이면 충분히 필요한 자원을 준비할 수 있음.

---

### **성공을 위한 다양한 실험**
#### **기존 IT 서비스 환경 (On-Premises)**
- 혁신을 위한 시도가 적고 실패의 비용이 높아 혁신 속도가 느림.
#### **클라우드 환경 (Public Cloud)**
- 혁신을 위한 시도가 많아지고 실패의 비용이 낮아 다양한 혁신이 가능.

---

### **사용자는 "필요한 것"에만 집중**
- **여러분의 소중한 서비스**: 클라우드는 사용자가 애플리케이션 환경과 웹 서버, 데이터베이스, 운영 체제 등 "필요한 것"에만 집중할 수 있도록 도음.
- **물리적 서버는 클라우드 제공자가 관리**

---

### **보다 쉬운 글로벌 진출**
- **지속적인 데이터센터 증설**: 클라우드 제공자는 전 세계적으로 데이터센터를 지속적으로 증설하여 손쉬운 글로벌 서비스를 가능하게 함.

---

### **클라우드 유형**
- **Public Cloud (공용 클라우드)**: 클라우드 서비스 제공자가 소유하며, 특정되지 않은 사용자에게 리소스와 서비스를 제공. 일반 인터넷을 통해 접근 가능.
- **Private Cloud (사설 클라우드)**: 조직에서 소유, 관리 및 운영하는 클라우드. 보안을 강화하고, 특정 사용자에게만 리소스와 서비스를 제공. 주로 사내망을 사용하여 접근.
- **Hybrid Cloud (하이브리드 클라우드)**: 퍼블릭 클라우드와 프라이빗 클라우드를 결합하여 각 클라우드의 장점을 활용. 예를 들어, 사내 데이터센터를 사용하다가 퍼블릭 클라우드로 확장할 수 있음. 네트워크는 VPN 또는 전용선으로 연결.

---

### **클라우드 컴퓨팅 3가지 서비스 모델**
#### **인프라서비스(Infrastructure as a Service, IaaS)**
- 서버, 네트워킹, 데이터 저장 등의 인프라를 제공하여 사용자가 손쉽게 이전하거나 기존 온프레미스 환경과 함께 사용할 수 있도록 함.
#### **플랫폼서비스(Platform as a Service, PaaS)**
- 개발 환경 등의 플랫폼을 제공하여 사용자가 기본 인프라를 관리할 필요 없이 애플리케이션을 개발하고 실행할 수 있도록 함.
#### **소프트웨어서비스(Software as a Service, SaaS)**
- 소프트웨어를 서비스 형태로 제공하여 사용자가 별도의 설치나 유지보수 없이 사용할 수 있도록 함. 서비스 제공자가 모든 운영 및 관리를 담당함.

---

### **클라우드 서비스 모델 요약**
- **전통적인 온프레미스**: 사용자가 모든 것을 직접 관리.
- **IaaS**: 하드웨어 인프라를 클라우드에서 제공하며, 사용자는 소프트웨어 부분을 관리.
- **PaaS**: 플랫폼까지 클라우드에서 제공하며, 사용자는 애플리케이션에만 집중할 수 있음.
- **SaaS**: 소프트웨어까지 제공되며, 사용자는 소프트웨어를 사용하는 것에만 집중하면 됨.

---

## **Chap 2. Azure 기본 서비스 (네트워크, 컴퓨팅, 스토리지)**

---

### **Azure?**
• Microsoft가 제공하는 퍼블릭 클라우드 플랫폼

---

### **Azure Portal**

---

### **Azure 서비스**

---

### **Azure 리소스**
• Azure가 관리하는 항목

---

### **Azure 리소스 그룹**
• 리소스 그룹은 수명 주기 및 보안에 따라
단일 엔터티로 관리할 수 있도록
여러 리소스를 연결하는 논리적 컨테이너

---

### **Azure 구독**
• Azure에서 리소스를 프로비저닝하는데 사용되는 논리적인 컨테이너

---

### **Location (지역)**
• 대기시간이 정해진 일정 경계안의 데이터센터의 집합

---

### **Availability Zone (가용성 영역)**
• Region 내에서 물리적으로 분리된 데이터센터
• 장애 발생 시 데이터 손실을 막고자 가용영역간 복제를 권장
• 왕복 대기 시간이 2ms 미만의 고성능 네트워크를 통해 연결

---

### **AZ가 지원되는 Azure Region**

---

### **재해 복구 (Disaster Recovery)**
• 외부 요인에 의한 재해 :
– 지진, 태풍, 홍수, 화재 등 자연재해
– 테러로 인한 폭파, 전쟁, 해킹, 통신장애, 전력 공급 차단 등 인위적인 재해
• 내부 요인에 의한 재해 :
– 시스템 결함, 기계오류, 관리 오류, 사용자의 실수 등
• 복구 목표
– RPO(복구 지점 목표)
– RTO(복구 시간 목표)

---

### **데이터 복구 방안**
• 백업 : 특정 시점으로 데이터를 복원
– Azure Backup 을 사용하여 복구에 사용할 수 있는 스냅샷을 생성
• 데이터 복제 : 여러 데이터 저장소 복제본에 실시간 또는 거의 실시간으로 라이브 데
이터 복사본을 생성

---

### **Cross Region Replication (지역 간 복제)**
• 또 다른 보조 지역을 활용하여 재해 복구를 통해
지역적 또는 대규모 지리적 재해로부터 보호
• 주 지역과 보조 지역은 모두 지역 쌍(Region Pair)을 형성

---

### **지역 쌍(Region Pair)**
• 두 개의 데이터센터에도 영향을 미칠 정도의 큰 재해를 대비
• 광범위하게 분산된 데이터센터를 통해 높은 가용성 보장

---

### **Azure Vnet**
• Azure의 프라이빗 네트워크의 기본 구성 요소, 가상 사설 네트워크 환경
• Azure 리소스가 서로, 인터넷 및 특정 온-프레미스 네트워크와 안전하게 통신

---

### **Azure Vnet 아키텍쳐**

---

### **Why use Vnet?**
• 인터넷 통신
• Azure 리소스간 통신
• 온-프레미스 리소스와 통신
• 네트워크 트래픽 필터링
• 네트워크 트래픽 라우팅
• Azure 서비스에 대한 가상 네트워크 통합

---

### **Vnet 사용**
• 사용할 네트워크 사설 대역을 결정 - CIDR(Classless Inter-Domain Routing)
– CIDR : 가장 일반적으로 활용되고 있는 IP 주소 할당 및 표기 방법
• 대역 결정 고려사항
– 구축할 서비스의 규모
– IP 소모 개수
– 추후 확장 가능성
– 타 시스템 연계 가능성
– ETC..

---

### **Azure Subnet**
• 하나의 네트워크가 분할되어 나눠진 작은 네트워크
• Vnet 의 IP 대역을 적절한 단위로 분할 사용하는 방식
• 각 Subnet 도 Vnet와 동일하게 CIDR 을 이용해 IP 범위 지정
• Subnet 의 IP 대역은 반드시 Vnet 전체 대역 내에 존재해야 함
• Vnet내 Subnet 들의 IP 대역은 중복 할당 불가
• 사용중인 Subnet의 경우 CIDR 변경 불가

---

### **Azure Subnet 아키텍쳐**

---

### **Why use Subnet?**
• 효율적인 IP 관리
• 브로드캐스트 사이즈 감소
• 네트워크 분리를 통한 보안성 확보

---

### **Azure NIC**
• 가상머신과 가상네트워크 간의 상호 연결
• 가상머신에는 하나 이상의 NIC가 필수
• 가상머신의 크기(사양)에 따라 NIC를 2개 이상 포함할 수 있음

---

### **Azure Public IP**
• Azure 리소스가 인터넷 통신을 하기 위한 IP
• 사용시 요금이 청구
• 구독 당 사용 가능한 최대 개수가 제한
(필요시 요청하여 제한개수를 증설)
• PIP(Public IP) Type
– Static : 리소스를 만들 때, IP를 할당
– Dynamic : PIP를 리소스에 연결할 때 IP 할당

---

### **VM**
• 물리 OS에서 만들어내는 또다른 가상 운영체제 컴퓨터

---

### **Azure VM**
• Azure에서 제공하는 VM 서비스
• 주문 확장가능

---

### **Azure VM OS**
• 다양한 OS를 제공

---

### **네트워크 보안그룹**
• Azure 리소스와 주고받는 네트워크 트래픽을 필터링

---

### **네트워크 보안그룹 규칙 설정**

---

### **우선 순위**
|규칙 설정| 속성|
|우선순위 | 100~4096 사이의 숫자|
|         |Azure NSG는 우선순위에 따라 규칙을 처리하고|
|         |낮은 숫자는 높은 숫자보다 먼저 처리|

---

### **네트워크 보안그룹 예시**
• 인바운드 트래픽
– vm1 : nsg1, nsg2 규칙 처리
– vm2 : nsg1의 규칙 처리
– vm3 : nsg2의 규칙 처리
– vm4 : 연결된 nsg가 없기에 모든 트래픽 차단
• 아웃바운드 트래픽
– vm1 : nsg1, nsg2 규칙 처리
– vm2 : nsg1의 규칙 처리
– vm3 : nsg2의 규칙 처리
– vm4 : 연결된 nsg가 없기에 모든 트래픽 허용

---

### **애플리케이션 보안 그룹**
• 네트워크 보안 정책을
간소화하고 관리하기 위한 기능
• 네트워크 보안그룹 규칙을 설정할 때,
특정 IP주소, 서브넷 대신
논리적인 그룹 지정 가능

---

### **애플리케이션 보안 그룹 예시**
|우선 순위| 원본| 원본 포트| 대상| 대상 포트| 프로토콜| Access|
100 인터넷 * AsgWeb 80 TCP Allow
우선 순위 원본 원본 포트 대상 대상 포트 프로토콜 Access
120 * * AsgDb 1433 모두 Deny
우선 순위 원본 원본 포트 대상 대상 포트 프로토콜 Access
110 AsgLogic * AsgDb 1433 TCP Allow